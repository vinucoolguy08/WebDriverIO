{"version":3,"file":"resemble.js","sourceRoot":"","sources":["../../lib/resemble/resemble.js"],"names":[],"mappings":"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","sourcesContent":["/*\nJames Cryer / Huddle\nURL: https://github.com/Huddle/Resemble.js\n*/\n\nvar naiveFallback = function () {\n  // ISC (c) 2011-2019 https://github.com/medikoo/es5-ext/blob/master/global.js\n  if (typeof self === \"object\" && self) {\n    return self;\n  }\n  if (typeof window === \"object\" && window) {\n    return window;\n  }\n  throw new Error(\"Unable to resolve global `this`\");\n};\n\nvar getGlobalThis = function () {\n  // ISC (c) 2011-2019 https://github.com/medikoo/es5-ext/blob/master/global.js\n  // Fallback to standard globalThis if available\n  if (typeof globalThis === \"object\" && globalThis) {\n    return globalThis;\n  }\n\n  try {\n    Object.defineProperty(Object.prototype, \"__global__\", {\n      get: function () {\n        return this;\n      },\n      configurable: true\n    });\n  } catch (error) {\n    return naiveFallback();\n  }\n  try {\n    // eslint-disable-next-line no-undef\n    if (!__global__) {\n      return naiveFallback();\n    }\n    return __global__; // eslint-disable-line no-undef\n  } finally {\n    delete Object.prototype.__global__;\n  }\n};\n\nvar isNode = function () {\n  const globalPolyfill = getGlobalThis();\n  return typeof globalPolyfill.process !== \"undefined\" && globalPolyfill.process.versions && globalPolyfill.process.versions.node;\n};\n\n(function (root, factory) {\n  \"use strict\";\n  if (typeof define === \"function\" && define.amd) {\n    define([], factory);\n  } else if (typeof module === \"object\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.resemble = factory();\n  }\n})(this /* eslint-disable-line no-invalid-this*/, function () {\n  \"use strict\";\n\n  var Img;\n  var Canvas;\n  var loadNodeCanvasImage;\n\n  if (isNode()) {\n    Canvas = require(\"canvas\"); // eslint-disable-line global-require\n    Img = Canvas.Image;\n    loadNodeCanvasImage = Canvas.loadImage;\n  } else {\n    Img = Image;\n  }\n\n  function createCanvas(width, height) {\n    if (isNode()) {\n      return Canvas.createCanvas(width, height);\n    }\n\n    var cnvs = document.createElement(\"canvas\");\n    cnvs.width = width;\n    cnvs.height = height;\n    return cnvs;\n  }\n\n  var oldGlobalSettings = {};\n  var globalOutputSettings = oldGlobalSettings;\n\n  var resemble = function (fileData) {\n    var pixelTransparency = 1;\n\n    var errorPixelColor = {\n      // Color for Error Pixels. Between 0 and 255.\n      red: 255,\n      green: 0,\n      blue: 255,\n      alpha: 255\n    };\n\n    var targetPix = {r: 0, g: 0, b: 0, a: 0}; // isAntialiased\n\n    var errorPixelTransform = {\n      flat: function (px, offset) {\n        px[offset] = errorPixelColor.red;\n        px[offset + 1] = errorPixelColor.green;\n        px[offset + 2] = errorPixelColor.blue;\n        px[offset + 3] = errorPixelColor.alpha;\n      },\n      movement: function (px, offset, d1, d2) {\n        px[offset] = (d2.r * (errorPixelColor.red / 255) + errorPixelColor.red) / 2;\n        px[offset + 1] = (d2.g * (errorPixelColor.green / 255) + errorPixelColor.green) / 2;\n        px[offset + 2] = (d2.b * (errorPixelColor.blue / 255) + errorPixelColor.blue) / 2;\n        px[offset + 3] = d2.a;\n      },\n      flatDifferenceIntensity: function (px, offset, d1, d2) {\n        px[offset] = errorPixelColor.red;\n        px[offset + 1] = errorPixelColor.green;\n        px[offset + 2] = errorPixelColor.blue;\n        px[offset + 3] = colorsDistance(d1, d2);\n      },\n      movementDifferenceIntensity: function (px, offset, d1, d2) {\n        var ratio = (colorsDistance(d1, d2) / 255) * 0.8;\n\n        px[offset] = (1 - ratio) * (d2.r * (errorPixelColor.red / 255)) + ratio * errorPixelColor.red;\n        px[offset + 1] = (1 - ratio) * (d2.g * (errorPixelColor.green / 255)) + ratio * errorPixelColor.green;\n        px[offset + 2] = (1 - ratio) * (d2.b * (errorPixelColor.blue / 255)) + ratio * errorPixelColor.blue;\n        px[offset + 3] = d2.a;\n      },\n      diffOnly: function (px, offset, d1, d2) {\n        px[offset] = d2.r;\n        px[offset + 1] = d2.g;\n        px[offset + 2] = d2.b;\n        px[offset + 3] = d2.a;\n      }\n    };\n\n    var errorPixel = errorPixelTransform.flat;\n    var errorType;\n    var boundingBoxes;\n    var ignoredBoxes;\n    var ignoreAreasColoredWith;\n    var largeImageThreshold = 1200;\n    var useCrossOrigin = true;\n    var data = {};\n    var images = [];\n    var updateCallbackArray = [];\n\n    var tolerance = {\n      // between 0 and 255\n      red: 16,\n      green: 16,\n      blue: 16,\n      alpha: 16,\n      minBrightness: 16,\n      maxBrightness: 240\n    };\n\n    var ignoreAntialiasing = false;\n    var ignoreColors = false;\n    var scaleToSameSize = false;\n    var compareOnly = false;\n    var returnEarlyThreshold;\n\n    function colorsDistance(c1, c2) {\n      return (Math.abs(c1.r - c2.r) + Math.abs(c1.g - c2.g) + Math.abs(c1.b - c2.b)) / 3;\n    }\n\n    function withinBoundingBox(x, y, width, height, box) {\n      return x > (box.left || 0) && x < (box.right || width) && y > (box.top || 0) && y < (box.bottom || height);\n    }\n\n    function withinComparedArea(x, y, width, height, pixel2) {\n      var isIncluded = true;\n      var i;\n      var boundingBox;\n      var ignoredBox;\n      var selected;\n      var ignored;\n\n      if (boundingBoxes instanceof Array) {\n        selected = false;\n        for (i = 0; i < boundingBoxes.length; i++) {\n          boundingBox = boundingBoxes[i];\n          if (withinBoundingBox(x, y, width, height, boundingBox)) {\n            selected = true;\n            break;\n          }\n        }\n      }\n      if (ignoredBoxes instanceof Array) {\n        ignored = true;\n        for (i = 0; i < ignoredBoxes.length; i++) {\n          ignoredBox = ignoredBoxes[i];\n          if (withinBoundingBox(x, y, width, height, ignoredBox)) {\n            ignored = false;\n            break;\n          }\n        }\n      }\n\n      if (ignoreAreasColoredWith) {\n        return colorsDistance(pixel2, ignoreAreasColoredWith) !== 0;\n      }\n\n      if (selected === undefined && ignored === undefined) {\n        return true;\n      }\n      if (selected === false && ignored === true) {\n        return false;\n      }\n      if (selected === true || ignored === true) {\n        isIncluded = true;\n      }\n      if (selected === false || ignored === false) {\n        isIncluded = false;\n      }\n      return isIncluded;\n    }\n\n    function triggerDataUpdate() {\n      var len = updateCallbackArray.length;\n      var i;\n      for (i = 0; i < len; i++) {\n        if (typeof updateCallbackArray[i] === \"function\") {\n          updateCallbackArray[i](data);\n        }\n      }\n    }\n\n    function loop(w, h, callback) {\n      var x;\n      var y;\n\n      for (x = 0; x < w; x++) {\n        for (y = 0; y < h; y++) {\n          callback(x, y);\n        }\n      }\n    }\n\n    function parseImage(sourceImageData, width, height) {\n      var pixelCount = 0;\n      var redTotal = 0;\n      var greenTotal = 0;\n      var blueTotal = 0;\n      var alphaTotal = 0;\n      var brightnessTotal = 0;\n      var whiteTotal = 0;\n      var blackTotal = 0;\n\n      loop(width, height, function (horizontalPos, verticalPos) {\n        var offset = (verticalPos * width + horizontalPos) * 4;\n        var red = sourceImageData[offset];\n        var green = sourceImageData[offset + 1];\n        var blue = sourceImageData[offset + 2];\n        var alpha = sourceImageData[offset + 3];\n        var brightness = getBrightness(red, green, blue);\n\n        if (red === green && red === blue && alpha) {\n          if (red === 0) {\n            blackTotal++;\n          } else if (red === 255) {\n            whiteTotal++;\n          }\n        }\n\n        pixelCount++;\n\n        redTotal += (red / 255) * 100;\n        greenTotal += (green / 255) * 100;\n        blueTotal += (blue / 255) * 100;\n        alphaTotal += ((255 - alpha) / 255) * 100;\n        brightnessTotal += (brightness / 255) * 100;\n      });\n\n      data.red = Math.floor(redTotal / pixelCount);\n      data.green = Math.floor(greenTotal / pixelCount);\n      data.blue = Math.floor(blueTotal / pixelCount);\n      data.alpha = Math.floor(alphaTotal / pixelCount);\n      data.brightness = Math.floor(brightnessTotal / pixelCount);\n      data.white = Math.floor((whiteTotal / pixelCount) * 100);\n      data.black = Math.floor((blackTotal / pixelCount) * 100);\n\n      triggerDataUpdate();\n    }\n\n    function onLoadImage(hiddenImage, callback) {\n      // don't assign to hiddenImage, see https://github.com/Huddle/Resemble.js/pull/87/commits/300d43352a2845aad289b254bfbdc7cd6a37e2d7\n      var width = hiddenImage.width;\n      var height = hiddenImage.height;\n\n      if (scaleToSameSize && images.length === 1) {\n        width = images[0].width;\n        height = images[0].height;\n      }\n\n      var hiddenCanvas = createCanvas(width, height);\n      var imageData;\n\n      hiddenCanvas.getContext(\"2d\").drawImage(hiddenImage, 0, 0, width, height);\n      imageData = hiddenCanvas.getContext(\"2d\").getImageData(0, 0, width, height);\n\n      images.push(imageData);\n\n      callback(imageData, width, height);\n    }\n\n    function loadImageData(fileDataForImage, callback) {\n      var fileReader;\n      var hiddenImage = new Img();\n\n      if (!hiddenImage.setAttribute) {\n        hiddenImage.setAttribute = function setAttribute() {\n        };\n      }\n\n      if (useCrossOrigin) {\n        hiddenImage.setAttribute(\"crossorigin\", \"anonymous\");\n      }\n\n      hiddenImage.onerror = function (err) {\n        hiddenImage.onload = null;\n        hiddenImage.onerror = null; // fixes pollution between calls\n        images.push({error: err ? err + \"\" : \"Image load error.\"});\n        callback();\n      };\n\n      hiddenImage.onload = function () {\n        hiddenImage.onload = null; // fixes pollution between calls\n        hiddenImage.onerror = null;\n        onLoadImage(hiddenImage, callback);\n      };\n\n      if (typeof fileDataForImage === \"string\") {\n        hiddenImage.src = fileDataForImage;\n        if (!isNode() && hiddenImage.complete && hiddenImage.naturalWidth > 0) {\n          hiddenImage.onload();\n        }\n      } else if (\n        typeof fileDataForImage.data !== \"undefined\" &&\n        typeof fileDataForImage.width === \"number\" &&\n        typeof fileDataForImage.height === \"number\"\n      ) {\n        images.push(fileDataForImage);\n\n        callback(fileDataForImage, fileDataForImage.width, fileDataForImage.height);\n      } else if (typeof Buffer !== \"undefined\" && fileDataForImage instanceof Buffer) {\n        // If we have Buffer, assume we're on Node+Canvas and its supported\n        // hiddenImage.src = fileDataForImage;\n\n        loadNodeCanvasImage(fileDataForImage)\n          .then(function (image) {\n            hiddenImage.onload = null; // fixes pollution between calls\n            hiddenImage.onerror = null;\n            onLoadImage(image, callback);\n          })\n          .catch(function (err) {\n            images.push({\n              error: err ? err + \"\" : \"Image load error.\"\n            });\n            callback();\n          });\n      } else {\n        fileReader = new FileReader();\n        fileReader.onload = function (event) {\n          hiddenImage.src = event.target.result;\n        };\n        fileReader.readAsDataURL(fileDataForImage);\n      }\n    }\n\n    function isColorSimilar(a, b, color) {\n      var absDiff = Math.abs(a - b);\n\n      if (typeof a === \"undefined\") {\n        return false;\n      }\n      if (typeof b === \"undefined\") {\n        return false;\n      }\n\n      if (a === b) {\n        return true;\n      } else if (absDiff < tolerance[color]) {\n        return true;\n      }\n      return false;\n    }\n\n    function isPixelBrightnessSimilar(d1, d2) {\n      var alpha = isColorSimilar(d1.a, d2.a, \"alpha\");\n      var brightness = isColorSimilar(d1.brightness, d2.brightness, \"minBrightness\");\n      return brightness && alpha;\n    }\n\n    function getBrightness(r, g, b) {\n      return 0.3 * r + 0.59 * g + 0.11 * b;\n    }\n\n    function isRGBSame(d1, d2) {\n      var red = d1.r === d2.r;\n      var green = d1.g === d2.g;\n      var blue = d1.b === d2.b;\n      return red && green && blue;\n    }\n\n    function isRGBSimilar(d1, d2) {\n      var red = isColorSimilar(d1.r, d2.r, \"red\");\n      var green = isColorSimilar(d1.g, d2.g, \"green\");\n      var blue = isColorSimilar(d1.b, d2.b, \"blue\");\n      var alpha = isColorSimilar(d1.a, d2.a, \"alpha\");\n\n      return red && green && blue && alpha;\n    }\n\n    function isContrasting(d1, d2) {\n      return Math.abs(d1.brightness - d2.brightness) > tolerance.maxBrightness;\n    }\n\n    function getHue(red, green, blue) {\n      var r = red / 255;\n      var g = green / 255;\n      var b = blue / 255;\n      var max = Math.max(r, g, b);\n      var min = Math.min(r, g, b);\n      var h;\n      var d;\n\n      if (max === min) {\n        h = 0; // achromatic\n      } else {\n        d = max - min;\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n          case g:\n            h = (b - r) / d + 2;\n            break;\n          case b:\n            h = (r - g) / d + 4;\n            break;\n          default:\n            h /= 6;\n        }\n      }\n\n      return h;\n    }\n\n    function isAntialiased(sourcePix, pix, cacheSet, verticalPos, horizontalPos, width) {\n      var offset;\n      var distance = 1;\n      var i;\n      var j;\n      var hasHighContrastSibling = 0;\n      var hasSiblingWithDifferentHue = 0;\n      var hasEquivalentSibling = 0;\n\n      addHueInfo(sourcePix);\n\n      for (i = distance * -1; i <= distance; i++) {\n        for (j = distance * -1; j <= distance; j++) {\n          if (i === 0 && j === 0) {\n            // ignore source pixel\n          } else {\n            offset = ((verticalPos + j) * width + (horizontalPos + i)) * 4;\n\n            if (!getPixelInfo(targetPix, pix, offset, cacheSet)) {\n              continue;\n            }\n\n            addBrightnessInfo(targetPix);\n            addHueInfo(targetPix);\n\n            if (isContrasting(sourcePix, targetPix)) {\n              hasHighContrastSibling++;\n            }\n\n            if (isRGBSame(sourcePix, targetPix)) {\n              hasEquivalentSibling++;\n            }\n\n            if (Math.abs(targetPix.h - sourcePix.h) > 0.3) {\n              hasSiblingWithDifferentHue++;\n            }\n\n            if (hasSiblingWithDifferentHue > 1 || hasHighContrastSibling > 1) {\n              return true;\n            }\n          }\n        }\n      }\n\n      if (hasEquivalentSibling < 2) {\n        return true;\n      }\n\n      return false;\n    }\n\n    function copyPixel(px, offset, pix) {\n      if (errorType === \"diffOnly\") {\n        return;\n      }\n\n      px[offset] = pix.r; // r\n      px[offset + 1] = pix.g; // g\n      px[offset + 2] = pix.b; // b\n      px[offset + 3] = pix.a * pixelTransparency; // a\n    }\n\n    function copyGrayScalePixel(px, offset, pix) {\n      if (errorType === \"diffOnly\") {\n        return;\n      }\n\n      px[offset] = pix.brightness; // r\n      px[offset + 1] = pix.brightness; // g\n      px[offset + 2] = pix.brightness; // b\n      px[offset + 3] = pix.a * pixelTransparency; // a\n    }\n\n    function getPixelInfo(dst, pix, offset) {\n      if (pix.length > offset) {\n        dst.r = pix[offset];\n        dst.g = pix[offset + 1];\n        dst.b = pix[offset + 2];\n        dst.a = pix[offset + 3];\n\n        return true;\n      }\n\n      return false;\n    }\n\n    function addBrightnessInfo(pix) {\n      pix.brightness = getBrightness(pix.r, pix.g, pix.b); // 'corrected' lightness\n    }\n\n    function addHueInfo(pix) {\n      pix.h = getHue(pix.r, pix.g, pix.b);\n    }\n\n    function analyseImages(img1, img2, width, height) {\n      var data1 = img1.data;\n      var data2 = img2.data;\n      var hiddenCanvas;\n      var context;\n      var imgd;\n      var pix;\n\n      if (!compareOnly) {\n        hiddenCanvas = createCanvas(width, height);\n\n        context = hiddenCanvas.getContext(\"2d\");\n        imgd = context.createImageData(width, height);\n        pix = imgd.data;\n      }\n\n      var mismatchCount = 0;\n      var diffBounds = {\n        top: height,\n        left: width,\n        bottom: 0,\n        right: 0\n      };\n      var updateBounds = function (x, y) {\n        diffBounds.left = Math.min(x, diffBounds.left);\n        diffBounds.right = Math.max(x, diffBounds.right);\n        diffBounds.top = Math.min(y, diffBounds.top);\n        diffBounds.bottom = Math.max(y, diffBounds.bottom);\n      };\n\n      var time = Date.now();\n\n      var skip;\n\n      if (!!largeImageThreshold && ignoreAntialiasing && (width > largeImageThreshold || height > largeImageThreshold)) {\n        skip = 6;\n      }\n\n      var pixel1 = {r: 0, g: 0, b: 0, a: 0};\n      var pixel2 = {r: 0, g: 0, b: 0, a: 0};\n\n      var skipTheRest = false;\n\n      loop(width, height, function (horizontalPos, verticalPos) {\n        if (skipTheRest) {\n          return;\n        }\n\n        if (skip) {\n          // only skip if the image isn't small\n          if (verticalPos % skip === 0 || horizontalPos % skip === 0) {\n            return;\n          }\n        }\n\n        var offset = (verticalPos * width + horizontalPos) * 4;\n        if (!getPixelInfo(pixel1, data1, offset, 1) || !getPixelInfo(pixel2, data2, offset, 2)) {\n          return;\n        }\n\n        var isWithinComparedArea = withinComparedArea(horizontalPos, verticalPos, width, height, pixel2);\n\n        if (ignoreColors) {\n          addBrightnessInfo(pixel1);\n          addBrightnessInfo(pixel2);\n\n          if (isPixelBrightnessSimilar(pixel1, pixel2) || !isWithinComparedArea) {\n            if (!compareOnly) {\n              copyGrayScalePixel(pix, offset, pixel2);\n            }\n          } else {\n            if (!compareOnly) {\n              errorPixel(pix, offset, pixel1, pixel2);\n            }\n\n            mismatchCount++;\n            updateBounds(horizontalPos, verticalPos);\n          }\n          return;\n        }\n\n        if (isRGBSimilar(pixel1, pixel2) || !isWithinComparedArea) {\n          if (!compareOnly) {\n            copyPixel(pix, offset, pixel1);\n          }\n        } else if (\n          ignoreAntialiasing &&\n          (addBrightnessInfo(pixel1), // jit pixel info augmentation looks a little weird, sorry.\n            addBrightnessInfo(pixel2),\n          isAntialiased(pixel1, data1, 1, verticalPos, horizontalPos, width) || isAntialiased(pixel2, data2, 2, verticalPos, horizontalPos, width))\n        ) {\n          if (isPixelBrightnessSimilar(pixel1, pixel2) || !isWithinComparedArea) {\n            if (!compareOnly) {\n              copyGrayScalePixel(pix, offset, pixel2);\n            }\n          } else {\n            if (!compareOnly) {\n              errorPixel(pix, offset, pixel1, pixel2);\n            }\n\n            mismatchCount++;\n            updateBounds(horizontalPos, verticalPos);\n          }\n        } else {\n          if (!compareOnly) {\n            errorPixel(pix, offset, pixel1, pixel2);\n          }\n\n          mismatchCount++;\n          updateBounds(horizontalPos, verticalPos);\n        }\n\n        if (compareOnly) {\n          var currentMisMatchPercent = (mismatchCount / (height * width)) * 100;\n\n          if (currentMisMatchPercent > returnEarlyThreshold) {\n            skipTheRest = true;\n          }\n        }\n      });\n\n      data.rawMisMatchPercentage = (mismatchCount / (height * width)) * 100;\n      data.misMatchPercentage = data.rawMisMatchPercentage.toFixed(2);\n      data.diffBounds = diffBounds;\n      data.analysisTime = Date.now() - time;\n\n      data.getImageDataUrl = function (text) {\n        if (compareOnly) {\n          throw Error(\"No diff image available - ran in compareOnly mode\");\n        }\n\n        var barHeight = 0;\n\n        if (text) {\n          barHeight = addLabel(text, context, hiddenCanvas);\n        }\n\n        context.putImageData(imgd, 0, barHeight);\n\n        return hiddenCanvas.toDataURL(\"image/png\");\n      };\n\n      if (!compareOnly && hiddenCanvas.toBuffer) {\n        data.getBuffer = function (includeOriginal) {\n          if (includeOriginal) {\n            var imageWidth = hiddenCanvas.width + 2;\n            hiddenCanvas.width = imageWidth * 3;\n            context.putImageData(img1, 0, 0);\n            context.putImageData(img2, imageWidth, 0);\n            context.putImageData(imgd, imageWidth * 2, 0);\n          } else {\n            context.putImageData(imgd, 0, 0);\n          }\n          return hiddenCanvas.toBuffer();\n        };\n      }\n    }\n\n    function addLabel(text, context, hiddenCanvas) {\n      var textPadding = 2;\n\n      context.font = \"12px sans-serif\";\n\n      var textWidth = context.measureText(text).width + textPadding * 2;\n      var barHeight = 22;\n\n      if (textWidth > hiddenCanvas.width) {\n        hiddenCanvas.width = textWidth;\n      }\n\n      hiddenCanvas.height += barHeight;\n\n      context.fillStyle = \"#666\";\n      context.fillRect(0, 0, hiddenCanvas.width, barHeight - 4);\n      context.fillStyle = \"#fff\";\n      context.fillRect(0, barHeight - 4, hiddenCanvas.width, 4);\n\n      context.fillStyle = \"#fff\";\n      context.textBaseline = \"top\";\n      context.font = \"12px sans-serif\";\n      context.fillText(text, textPadding, 1);\n\n      return barHeight;\n    }\n\n    function normalise(img, w, h) {\n      var c;\n      var context;\n\n      if (img.height < h || img.width < w) {\n        c = createCanvas(w, h);\n        context = c.getContext(\"2d\");\n        context.putImageData(img, 0, 0);\n        return context.getImageData(0, 0, w, h);\n      }\n\n      return img;\n    }\n\n    function outputSettings(options) {\n      var key;\n\n      if (options.errorColor) {\n        for (key in options.errorColor) {\n          if (options.errorColor.hasOwnProperty(key)) {\n            errorPixelColor[key] = options.errorColor[key] === void 0 ? errorPixelColor[key] : options.errorColor[key];\n          }\n        }\n      }\n\n      if (options.errorType && errorPixelTransform[options.errorType]) {\n        errorPixel = errorPixelTransform[options.errorType];\n        errorType = options.errorType;\n      }\n\n      if (options.errorPixel && typeof options.errorPixel === \"function\") {\n        errorPixel = options.errorPixel;\n      }\n\n      pixelTransparency = isNaN(Number(options.transparency)) ? pixelTransparency : options.transparency;\n\n      if (options.largeImageThreshold !== undefined) {\n        largeImageThreshold = options.largeImageThreshold;\n      }\n\n      if (options.useCrossOrigin !== undefined) {\n        useCrossOrigin = options.useCrossOrigin;\n      }\n\n      if (options.boundingBox !== undefined) {\n        boundingBoxes = [options.boundingBox];\n      }\n\n      if (options.ignoredBox !== undefined) {\n        ignoredBoxes = [options.ignoredBox];\n      }\n\n      if (options.boundingBoxes !== undefined) {\n        boundingBoxes = options.boundingBoxes;\n      }\n\n      if (options.ignoredBoxes !== undefined) {\n        ignoredBoxes = options.ignoredBoxes;\n      }\n\n      if (options.ignoreAreasColoredWith !== undefined) {\n        ignoreAreasColoredWith = options.ignoreAreasColoredWith;\n      }\n    }\n\n    function compare(one, two) {\n      if (globalOutputSettings !== oldGlobalSettings) {\n        outputSettings(globalOutputSettings);\n      }\n\n      function onceWeHaveBoth() {\n        var width;\n        var height;\n        if (images.length === 2) {\n          if (images[0].error || images[1].error) {\n            data = {};\n            data.error = images[0].error ? images[0].error : images[1].error;\n            triggerDataUpdate();\n            return;\n          }\n          width = images[0].width > images[1].width ? images[0].width : images[1].width;\n          height = images[0].height > images[1].height ? images[0].height : images[1].height;\n\n          if (images[0].width === images[1].width && images[0].height === images[1].height) {\n            data.isSameDimensions = true;\n          } else {\n            data.isSameDimensions = false;\n          }\n\n          data.dimensionDifference = {\n            width: images[0].width - images[1].width,\n            height: images[0].height - images[1].height\n          };\n\n          analyseImages(normalise(images[0], width, height), normalise(images[1], width, height), width, height);\n\n          triggerDataUpdate();\n        }\n      }\n\n      images = [];\n      loadImageData(one, onceWeHaveBoth);\n      loadImageData(two, onceWeHaveBoth);\n    }\n\n    function getCompareApi(param) {\n      var secondFileData;\n      var hasMethod = typeof param === \"function\";\n\n      if (!hasMethod) {\n        // assume it's file data\n        secondFileData = param;\n      }\n\n      var self = {\n        setReturnEarlyThreshold: function (threshold) {\n          if (threshold) {\n            compareOnly = true;\n            returnEarlyThreshold = threshold;\n          }\n          return self;\n        },\n        scaleToSameSize: function () {\n          scaleToSameSize = true;\n\n          if (hasMethod) {\n            param();\n          }\n          return self;\n        },\n        useOriginalSize: function () {\n          scaleToSameSize = false;\n\n          if (hasMethod) {\n            param();\n          }\n          return self;\n        },\n        ignoreNothing: function () {\n          tolerance.red = 0;\n          tolerance.green = 0;\n          tolerance.blue = 0;\n          tolerance.alpha = 0;\n          tolerance.minBrightness = 0;\n          tolerance.maxBrightness = 255;\n\n          ignoreAntialiasing = false;\n          ignoreColors = false;\n\n          if (hasMethod) {\n            param();\n          }\n          return self;\n        },\n        ignoreLess: function () {\n          tolerance.red = 16;\n          tolerance.green = 16;\n          tolerance.blue = 16;\n          tolerance.alpha = 16;\n          tolerance.minBrightness = 16;\n          tolerance.maxBrightness = 240;\n\n          ignoreAntialiasing = false;\n          ignoreColors = false;\n\n          if (hasMethod) {\n            param();\n          }\n          return self;\n        },\n        ignoreAntialiasing: function () {\n          tolerance.red = 32;\n          tolerance.green = 32;\n          tolerance.blue = 32;\n          tolerance.alpha = 32;\n          tolerance.minBrightness = 64;\n          tolerance.maxBrightness = 96;\n\n          ignoreAntialiasing = true;\n          ignoreColors = false;\n\n          if (hasMethod) {\n            param();\n          }\n          return self;\n        },\n        ignoreColors: function () {\n          tolerance.alpha = 16;\n          tolerance.minBrightness = 16;\n          tolerance.maxBrightness = 240;\n\n          ignoreAntialiasing = false;\n          ignoreColors = true;\n\n          if (hasMethod) {\n            param();\n          }\n          return self;\n        },\n        ignoreAlpha: function () {\n          tolerance.red = 16;\n          tolerance.green = 16;\n          tolerance.blue = 16;\n          tolerance.alpha = 255;\n          tolerance.minBrightness = 16;\n          tolerance.maxBrightness = 240;\n\n          ignoreAntialiasing = false;\n          ignoreColors = false;\n\n          if (hasMethod) {\n            param();\n          }\n          return self;\n        },\n        repaint: function () {\n          if (hasMethod) {\n            param();\n          }\n          return self;\n        },\n        outputSettings: function (options) {\n          outputSettings(options);\n          return self;\n        },\n        onComplete: function (callback) {\n          updateCallbackArray.push(callback);\n\n          var wrapper = function () {\n            compare(fileData, secondFileData);\n          };\n\n          wrapper();\n\n          return getCompareApi(wrapper);\n        }\n      };\n\n      return self;\n    }\n\n    var rootSelf = {\n      onComplete: function (callback) {\n        updateCallbackArray.push(callback);\n        loadImageData(fileData, function (imageData, width, height) {\n          parseImage(imageData.data, width, height);\n        });\n      },\n      compareTo: function (secondFileData) {\n        return getCompareApi(secondFileData);\n      },\n      outputSettings: function (options) {\n        outputSettings(options);\n        return rootSelf;\n      }\n    };\n\n    return rootSelf;\n  };\n\n  function setGlobalOutputSettings(settings) {\n    globalOutputSettings = settings;\n    return resemble;\n  }\n\n  function applyIgnore(api, ignore) {\n    switch (ignore) {\n      case \"nothing\":\n        api.ignoreNothing();\n        break;\n      case \"less\":\n        api.ignoreLess();\n        break;\n      case \"antialiasing\":\n        api.ignoreAntialiasing();\n        break;\n      case \"colors\":\n        api.ignoreColors();\n        break;\n      case \"alpha\":\n        api.ignoreAlpha();\n        break;\n      default:\n        throw new Error(\"Invalid ignore: \" + ignore);\n    }\n  }\n\n  resemble.compare = function (image1, image2, options, cb) {\n    var callback;\n    var opt;\n\n    if (typeof options === \"function\") {\n      callback = options;\n      opt = {};\n    } else {\n      callback = cb;\n      opt = options || {};\n    }\n\n    var res = resemble(image1);\n    var compare;\n\n    if (opt.output) {\n      res.outputSettings(opt.output);\n    }\n\n    compare = res.compareTo(image2);\n\n    if (opt.returnEarlyThreshold) {\n      compare.setReturnEarlyThreshold(opt.returnEarlyThreshold);\n    }\n\n    if (opt.scaleToSameSize) {\n      compare.scaleToSameSize();\n    }\n\n    if (typeof opt.ignore === \"string\") {\n      applyIgnore(compare, opt.ignore);\n    } else if (opt.ignore && opt.ignore.forEach) {\n      opt.ignore.forEach(function (v) {\n        applyIgnore(compare, v);\n      });\n    }\n\n    compare.onComplete(function (data) {\n      if (data.error) {\n        callback(data.error);\n      } else {\n        callback(null, data);\n      }\n    });\n  };\n\n  resemble.outputSettings = setGlobalOutputSettings;\n  return resemble;\n});\n"]}