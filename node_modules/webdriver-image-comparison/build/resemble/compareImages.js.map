{"version":3,"file":"compareImages.js","sourceRoot":"","sources":["../../lib/resemble/compareImages.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,qCAAuC;AAIvC,SAA8B,aAAa,CAAC,MAAc,EAAE,MAAc,EAAE,OAAuB;;;YACjG,WAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;oBAI7B,IAAA,KAAqC,OAAO,CAAC,eAAe,IAAI,MAAM,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,CAAA,CAAC,CAAC;wBACjG,eAAe,EAAE,MAAM;wBACvB,eAAe,EAAE,MAAM;qBACxB,CAAC,CAAC,CAAC,EAAC,eAAe,EAAE,MAAM,EAAE,eAAe,EAAE,MAAM,EAAC,EAHjD,eAAe,qBAAA,EAAE,eAAe,qBAGiB,CAAC;oBAEvD,QAAQ,CAAC,OAAO,CAAC,eAAe,EAAE,eAAe,EAAE,OAAO,EAAE,UAAC,GAAQ,EAAE,IAAS;wBAC9E,IAAI,GAAG,EAAE;4BACP,MAAM,CAAC,GAAG,CAAC,CAAC;yBACb;6BAAM;4BACL,OAAO,CAAC,IAAI,CAAC,CAAC;yBACf;oBACH,CAAC,CAAC,CAAC;gBACL,CAAC,CAAC,EAAC;;;CACJ;AAlBD,gCAkBC","sourcesContent":["/* istanbul ignore file */\n//@ts-ignore\nimport * as resemble from './resemble';\nimport {CompareOptions} from '../methods/images.interfaces';\nimport {CompareData} from './compare.interfaces';\n\nexport default async function compareImages(image1: Buffer, image2: Buffer, options: CompareOptions):Promise<CompareData> {\n  return new Promise((resolve, reject) => {\n\n    //Resemble.js implemented in the way that scales 2nd images to the size of 1st.\n    //Experimentally proven that downscaling images produces more accurate result than upscaling\n    let {imageToCompare1, imageToCompare2} = options.scaleToSameSize && image1.length > image2.length? {\n      imageToCompare1: image2,\n      imageToCompare2: image1\n    } : {imageToCompare1: image1, imageToCompare2: image2};\n\n    resemble.compare(imageToCompare1, imageToCompare2, options, (err: any, data: any) => {\n      if (err) {\n        reject(err);\n      } else {\n        resolve(data);\n      }\n    });\n  });\n}\n"]}